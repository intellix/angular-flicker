"use strict";angular.module("angularFlicker",["ngAnimate"]).filter("chunk",function(){return function(a,b){return[].concat.apply([],a.map(function(c,d){return d%b?[]:[a.slice(d,d+b)]}))}}).directive("flicker",function(){return{restrict:"E",scope:{delay:"=",endDelay:"="},controller:["$scope","$interval",function(a){this.rows=[],this.delay=a.delay||1e3,this.endDelay=a.endDelay||1e3,this.addRow=function(a){this.rows.push(a)},this.start=function(){angular.forEach(this.rows,function(a){a.start()})},this.stop=function(){angular.forEach(this.rows,function(a){a.stop()})}}]}}).directive("flickerRow",["$timeout","$interval","$animate",function(a,b,c){return{require:"^flicker",restrict:"E",transclude:!0,link:function(d,e,f,g){d.frozen=!1,d.freeze=function(){d.paused=!0},d.unfreeze=function(){d.paused=!1},d.flicker=function(){var a=angular.element(e[0].querySelector("flicker-item")),b=angular.element(e[0].querySelector("flicker-item:last-child"));c.enter(a,e,b),c.addClass(b,"leave",function(){b.removeClass("leave")})},d.start=function(){var c=g.delay+g.delay*d.$index,e=g.rows.length*g.delay+g.endDelay;d.timeout=a(function(){d.paused||d.flicker(),d.interval=b(function(){d.paused||d.flicker()},e)},c)},d.stop=function(){d.timeout.cancel(),d.interval.cancel()},g.addRow(d),d.$last&&g.start()}}}]).directive("flickerItem",function(){return{require:"^flicker",restrict:"E",link:function(a){a.$last&&a.$emit("itemsLoaded")}}});